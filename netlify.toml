[build]
  # The directory where Flutter builds the web app
  publish = "build/web"

  # Command to build the Flutter web app
  command = "flutter build web --release"

[build.environment]
  # Specify Flutter channel (stable)
  FLUTTER_CHANNEL = "stable"

# Headers for better performance and security
[[headers]]
  for = "/*"
  [headers.values]
    # Enable CORS if needed
    Access-Control-Allow-Origin = "*"

    # Cache static assets
    Cache-Control = "public, max-age=3600"

[[headers]]
  for = "/*.js"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.css"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/assets/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# Redirect rules for SPA
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
  force = false
