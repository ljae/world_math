import 'package:cloud_firestore/cloud_firestore.dart';
import '../models/models.dart';
import 'json_problem_loader.dart';

class FirestoreService {
  static final FirestoreService _instance = FirestoreService._internal();
  factory FirestoreService() => _instance;
  FirestoreService._internal();

  final FirebaseFirestore _db = FirebaseFirestore.instance;

  // ëª¨ë“  í•™êµ ëª©ë¡ì„ ìºì‹±í•˜ê¸° ìœ„í•œ ë³€ìˆ˜
  static List<School> _allSchools = [];

  // 'í¬í•¨(contains)' ë°©ì‹ìœ¼ë¡œ í•™êµë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.
  Future<List<School>> searchSchools(String query) async {
    if (query.isEmpty) return [];

    // ìºì‹œëœ í•™êµ ëª©ë¡ì´ ì—†ìœ¼ë©´ Firestoreì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.
    if (_allSchools.isEmpty) {
      final snapshot = await _db.collection('schools').get();
      _allSchools = snapshot.docs.map((doc) => School.fromMap(doc.data(), doc.id)).toList();
    }

    // í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ 'contains' í•„í„°ë§ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    // school_name ë˜ëŠ” locationì— queryê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
    return _allSchools.where((school) {
      final schoolNameLower = school.school_name.toLowerCase();
      final locationLower = school.location.toLowerCase();
      final queryLower = query.toLowerCase();
      return schoolNameLower.contains(queryLower) || locationLower.contains(queryLower);
    }).toList();
  }

  // Add a school (for seeding)
  Future<void> addSchool(School school) async {
    await _db.collection('schools').add(school.toMap());
  }

  // A function to seed the database with initial data.
  // This should be called once, manually, to populate the Firestore database.
  Future<void> seedDatabase() async {
    print('FirestoreService: Seeding database...');
    final problems = [

      Problem(
        id: 'p_20251117', // Monday - Restored TCO Problem
        date: DateTime(2025, 11, 17),
        title: 'TCOì™€ ê¸°íšŒë¹„ìš©: "ê·¸ëœì € ê¹¡í†µ vs í’€ì˜µì…˜ í•˜ì´ë¸Œë¦¬ë“œ"',
        content: r'''
1. ë¬¸ì œ ê°œìš” ë° ì„¤ê³„ ì˜ë„
ìë™ì°¨ êµ¬ë§¤ëŠ” ì‚¬íšŒì´ˆë…„ìƒì´ ê²ªëŠ” ê°€ì¥ í° ì§€ì¶œì…ë‹ˆë‹¤. ë‹¨ìˆœíˆ ì—°ë¹„ë§Œ ë¹„êµí•˜ëŠ” ê²ƒì„ ë„˜ì–´, ì´ˆê¸° ë¹„ìš© ì ˆê°ë¶„ì„ ìë³¸ìœ¼ë¡œ ì¹˜í™˜í–ˆì„ ë•Œì˜ 'ê¸°íšŒë¹„ìš©'ì„ ìˆ˜í•™ì ìœ¼ë¡œ ëª¨ë¸ë§í•©ë‹ˆë‹¤. "ì•„ë‚€ ëˆì„ íˆ¬ìí–ˆì„ ë•Œ"ë¼ëŠ” ê°€ì •ì´ ì‹¤ì œ ê²½ì œì  ìš°ìœ„ë¥¼ ì–´ë–»ê²Œ ë°”ê¾¸ëŠ”ì§€, ê·¸ë¦¬ê³  ê·¸ ì†ìµë¶„ê¸°ì ì´ ì–¸ì œì¸ì§€ ê³„ì‚°í•´ë´…ë‹ˆë‹¤.

2. ë¬¸ì œ ìƒì„¸ (í˜„ì‹¤ ë°ì´í„° ë°˜ì˜)
ì‹œì : 2025ë…„ 11ì›”
ê·€í•˜ëŠ” í˜„ëŒ€ìë™ì°¨ì˜ **'ë”” ì˜¬ ë‰´ ê·¸ëœì €(GN7)'** êµ¬ë§¤ë¥¼ ê³ ë¯¼ ì¤‘ì…ë‹ˆë‹¤.

**[ì°¨ëŸ‰ ì˜µì…˜]**

- **ëª¨ë¸ A (2.5 ê°€ì†”ë¦° í”„ë¦¬ë¯¸ì—„):** ì·¨ë“ì„¸ í¬í•¨ ì‹¤êµ¬ë§¤ê°€ **37,680,000ì›**, ì—°ê°„ ì˜ˆìƒ ìœ ë¥˜ë¹„ **3,000,000ì›**
- **ëª¨ë¸ B (1.6 í„°ë³´ í•˜ì´ë¸Œë¦¬ë“œ ìº˜ë¦¬ê·¸ë˜í”¼):** ì·¨ë“ì„¸ í¬í•¨ ì‹¤êµ¬ë§¤ê°€ **52,440,000ì›**, ì—°ê°„ ì˜ˆìƒ ìœ ë¥˜ë¹„ **1,800,000ì›**

**[ì „ì œ ì¡°ê±´]**

1. ì°¨ëŸ‰ì€ ì „ì•¡ **í˜„ê¸ˆ ì¼ì‹œë¶ˆ**ë¡œ êµ¬ë§¤í•©ë‹ˆë‹¤ (í• ë¶€ ì´ì ì—†ìŒ)
2. ì°¨ëŸ‰ ê°€ê²© ì°¨ì•¡(B - A)ë§Œí¼ì˜ í˜„ê¸ˆì„ ë³´ìœ í•œ ê²½ìš°, ì´ë¥¼ **ì—° 3.5% ì •ê¸°ì˜ˆê¸ˆ**(ë‹¨ë¦¬, ì„¸í›„ ê¸°ì¤€)ì— ì˜ˆì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
3. ê°ê°€ìƒê°ë¹„Â·ë³´í—˜ë£ŒÂ·ìë™ì°¨ì„¸ ë“± ê¸°íƒ€ ìœ ì§€ë¹„ëŠ” ê³„ì‚°ì—ì„œ ì œì™¸í•©ë‹ˆë‹¤
4. **ëˆ„ì  ì´ë¹„ìš©**ì€ ë‹¤ìŒ ê³µì‹ìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤:
   - ëª¨ë¸ A: 37,680,000 + 3,000,000n (në…„ í›„)
   - ëª¨ë¸ B: 52,440,000 + 1,800,000n + 516,600n (në…„ í›„, 516,600ì›ì€ ì—°ê°„ ê¸°íšŒë¹„ìš©)

**[ê¸°íšŒë¹„ìš© ê³„ì‚°]**

ì°¨ì•¡ 14,760,000ì›ì„ ì˜ˆê¸ˆí•˜ë©´ ë§¤ë…„ ì´ì ìˆ˜ìµ: 14,760,000 Ã— 0.035 = 516,600ì›

ë”°ë¼ì„œ ëª¨ë¸ B ì„ íƒ ì‹œ, ë§¤ë…„ ì´ ê¸°íšŒë¹„ìš©ì„ ì¶”ê°€ë¡œ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.
''',
        question: 'ëª¨ë¸ Bê°€ ëª¨ë¸ Aë³´ë‹¤ ì´ë¹„ìš© ì¸¡ë©´ì—ì„œ ìœ ë¦¬í•´ì§€ëŠ” ì‹œì ì€ ëª‡ ë…„ í›„ì…ë‹ˆê¹Œ? (ì†Œìˆ˜ì  ì²«ì§¸ ìë¦¬ì—ì„œ ì˜¬ë¦¼)',
        choices: ['â‘  18ë…„', 'â‘¡ 20ë…„', 'â‘¢ 22ë…„', 'â‘£ 24ë…„', 'â‘¤ 26ë…„'],
        correctAnswer: '3',
        explanation: r'''
### ğŸ“ ì •ë‹µ ë° í’€ì´

**Step 1. ëª¨ë¸ Aì˜ në…„ í›„ ì´ë¹„ìš©**
$$C_A(n) = 37,680,000 + 3,000,000n$$
(ì´ˆê¸° êµ¬ë§¤ê°€ + ì—°ê°„ ìœ ë¥˜ë¹„ Ã— në…„)

**Step 2. ëª¨ë¸ Bì˜ në…„ í›„ ì´ë¹„ìš© (ê¸°íšŒë¹„ìš© í¬í•¨)**
$$C_B(n) = 52,440,000 + 1,800,000n + 516,600n$$
$$= 52,440,000 + 2,316,600n$$
(ì´ˆê¸° êµ¬ë§¤ê°€ + ì—°ê°„ ìœ ë¥˜ë¹„ + ì—°ê°„ ê¸°íšŒë¹„ìš©) Ã— në…„

**Step 3. ì†ìµë¶„ê¸°ì  ë°©ì •ì‹ ì„¤ì •**
$$37,680,000 + 3,000,000n = 52,440,000 + 2,316,600n$$

**Step 4. ë°©ì •ì‹ í’€ì´**
$$3,000,000n - 2,316,600n = 52,440,000 - 37,680,000$$
$$683,400n = 14,760,000$$
$$n = \frac{14,760,000}{683,400} \approx 21.6$$

**Step 5. ìµœì¢… ë‹µì•ˆ**
21.6ë…„ â†’ ì†Œìˆ˜ì  ì²«ì§¸ ìë¦¬ì—ì„œ ì˜¬ë¦¼ â†’ **22ë…„**
ì¦‰, 22ë…„ì°¨ë¶€í„° ëª¨ë¸ Bê°€ ì´ë¹„ìš© ì¸¡ë©´ì—ì„œ ìœ ë¦¬í•´ì§‘ë‹ˆë‹¤.

**âœ… ì •ë‹µ: â‘¢ 22ë…„**

---

### ğŸ’¡ ê²½ì œì  í•´ì„

**"í•˜ì´ë¸Œë¦¬ë“œ, ê¸°íšŒë¹„ìš© ë”°ì§€ë©´ 22ë…„ íƒ€ì•¼ ì´ë“?"**

í•˜ì´ë¸Œë¦¬ë“œ ì°¨ëŸ‰ì€ ì—°ê°„ 120ë§Œ ì›ì˜ ì—°ë£Œë¹„ë¥¼ ì ˆê°í•˜ì§€ë§Œ, ì´ˆê¸° êµ¬ë§¤ ë¹„ìš© ì°¨ì•¡(ì•½ 1,476ë§Œ ì›)ì— ëŒ€í•œ **ê¸°íšŒë¹„ìš©(ì—° 51.6ë§Œ ì›)**ì„ ê³ ë ¤í•˜ë©´ ì‹¤ì œ ì†ìµë¶„ê¸°ì ì€ 22ë…„ìœ¼ë¡œ ë§¤ìš° ê¸¸ì–´ì§‘ë‹ˆë‹¤.

> **í•µì‹¬ ì¸ì‚¬ì´íŠ¸**
>
> * **ì—°ë£Œë¹„ ì ˆê°**: ì—°ê°„ 120ë§Œ ì› (300ë§Œ - 180ë§Œ)
> * **ê¸°íšŒë¹„ìš©**: ì—°ê°„ 51.66ë§Œ ì› (ì°¨ì•¡ ì˜ˆê¸ˆ ì´ì)
> * **ìˆœ ì ˆê°ì•¡**: ì—°ê°„ 68.34ë§Œ ì›
> * **ì†ìµë¶„ê¸°ì **: 1,476ë§Œ ì› Ã· 68.34ë§Œ ì› â‰ˆ 21.6ë…„
>
> ì¼ë°˜ì ì¸ ìš´ì „ì(ë³´ìœ  5~7ë…„)ì—ê²ŒëŠ” í•˜ì´ë¸Œë¦¬ë“œì˜ ê²½ì œì  ìš°ìœ„ê°€ í¬ì§€ ì•Šì„ ìˆ˜ ìˆìœ¼ë©°, í™˜ê²½ì  ê°€ì¹˜ë‚˜ ì •ìˆ™ì„± ë“± ë¹„ì¬ë¬´ì  ìš”ì†Œë¥¼ í•¨ê»˜ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.
''',
        newsTitle: "í•˜ì´ë¸Œë¦¬ë“œ ì „ì„±ì‹œëŒ€? 'ì¹´í‘¸ì–´' í”¼í•˜ë ¤ë©´ ì£¼í–‰ê±°ë¦¬ ë”°ì ¸ë´ì•¼",
        newsUrl: 'https://search.naver.com/search.naver?query=í•˜ì´ë¸Œë¦¬ë“œ+ì „ì„±ì‹œëŒ€+ì¹´í‘¸ì–´+ì£¼í–‰ê±°ë¦¬',
        mathTopic: 'ì¼ì°¨ë°©ì •ì‹ê³¼ ê¸°íšŒë¹„ìš© (ì¤‘í•™êµ 2í•™ë…„ ~ ê³ ë“±í•™êµ ìˆ˜í•™ I)',
        economicTheme: 'ìë™ì°¨ ì´ì†Œìœ ë¹„ìš©(TCO), ê¸°íšŒë¹„ìš©, ì†ìµë¶„ê¸°ì ',
      ),
      Problem(
        id: 'p_20251118', // Tue
        date: DateTime(2025, 11, 18),
        title: 'ë¶€ë™ì‚° ì„¸ê¸ˆ í­íƒ„: "ë˜ë¯¸ì•ˆ ì›ë² ì¼ë¦¬ ì–‘ë„ì„¸ ì‹œë®¬ë ˆì´ì…˜"',
        content: r'''
1. ë¬¸ì œ ê°œìš” ë° ì„¤ê³„ ì˜ë„
ë¶€ë™ì‚° íˆ¬ìì˜ í•µì‹¬ì€ 'ë§¤ìˆ˜'ê°€ ì•„ë‹ˆë¼ 'ë§¤ë„'ì™€ 'ì„¸ê¸ˆ'ì…ë‹ˆë‹¤. ëŒ€í•œë¯¼êµ­ ë¶€ë™ì‚° ëŒ€ì¥ì£¼ì¸ ë°˜í¬ **'ë˜ë¯¸ì•ˆ ì›ë² ì¼ë¦¬'**ë¥¼ ì†Œì¬ë¡œ, ë³´ìœ  ê¸°ê°„ì— ë”°ë¼ ì„¸ìœ¨ì´ ê¸‰ê²©íˆ ë³€í•˜ëŠ” êµ¬ì¡°ë¥¼ êµ¬ê°„ë³„ í•¨ìˆ˜ë¡œ í‘œí˜„í•˜ì—¬ ì„¸í›„ ìˆ˜ìµë¥ ì„ ê³„ì‚°í•©ë‹ˆë‹¤.

2. ë¬¸ì œ ìƒì„¸ (í˜„ì‹¤ ë°ì´í„° ë°˜ì˜)
ì‹œì : 2021ë…„ 1ì›” ë§¤ìˆ˜ ê°€ì • (ì…ì£¼ê¶Œ/ë¶„ì–‘ê¶Œ ìƒíƒœ)
ê¹€ì¬ì¤€ ì”¨ëŠ” ì„œì´ˆêµ¬ ë°˜í¬ë™ **'ë˜ë¯¸ì•ˆ ì›ë² ì¼ë¦¬(ì „ìš© 59ã¡)'**ë¥¼ ì´ ì·¨ë“ê°€ 31ì–µ ì›ì— ë§¤ìˆ˜í–ˆìŠµë‹ˆë‹¤.
[ì¡°ê±´]

ì‹œì„¸ í•¨ìˆ˜: ë§¤ìˆ˜ $x$ë…„ í›„ ì‹œì„¸ $y(x) = -0.8x^2 + 8x + 30$ (ë‹¨ìœ„: ì–µ ì›, $x \ge 0$)
í•´ì„¤: ì…ì£¼ì¥(2~3ë…„ì°¨)ì— ê°€ê²©ì´ ê¸‰ë“±í–ˆë‹¤ê°€ ì¡°ì •ë°›ëŠ” í˜„ì‹¤ì  ì‚¬ì´í´ ë°˜ì˜

ë¹„ìš©: ì–‘ë„ ìˆ˜ìˆ˜ë£Œ(ì¤‘ê°œë³´ìˆ˜ ë“±) 0.2ì–µ ì› ê³ ì •
ëˆ„ì  ëŒ€ì¶œ ì´ì: $I(1.5)=0.5$ì–µ ì›, $I(2.5)=0.8$ì–µ ì›

ì„¸ê¸ˆ(ì–‘ë„ì„¸): ë‹¨ê¸° ë§¤ë§¤ íˆ¬ê¸° ì–µì œë¥¼ ìœ„í•œ ì§•ë²Œì  ê³¼ì„¸ ì ìš©
$$R(x) = \begin{cases} 0.66 & (1 \le x < 2 \text{ : 1ë…„ ì´ìƒ 2ë…„ ë¯¸ë§Œ 66\%}) \\ 0.33 & (x \ge 2 \text{ : 2ë…„ ì´ìƒ ì¼ë°˜/ì¥ê¸°ë³´ìœ  ê°€ì • 33\%}) \end{cases}$$ 

ìµœì¢… ìˆœìˆ˜ìµ $N(x)$:
ë§¤ë„ê°€ - ì·¨ë“ê°€ - ë¹„ìš© - ì„¸ê¸ˆ - ì´ì
''',
        question: r'ë³´ìœ  ê¸°ê°„ 1.5ë…„ ì‹œì ì˜ ìˆœìˆ˜ìµ(A)ê³¼ 2.5ë…„ ì‹œì ì˜ ìˆœìˆ˜ìµ(B)ì˜ ì°¨ì´($B-A$)ëŠ” ì–¼ë§ˆì…ë‹ˆê¹Œ?',
        choices: ['â‘  4.886ì–µ ì›', 'â‘¡ 5.386ì–µ ì›', 'â‘¢ 5.886ì–µ ì›', 'â‘£ 6.386ì–µ ì›', 'â‘¤ 6.886ì–µ ì›'],
        correctAnswer: '3',
        explanation: r'''
### ğŸ“ ì •ë‹µ ë° í’€ì´

**Case A ($x=1.5$): ë‹¨ê¸° ë§¤ë„**

**Step 1. ë§¤ë„ê°€ ë° ì–‘ë„ì°¨ìµ**
$$y(1.5) = -0.8(1.5)^2 + 8(1.5) + 30 = 40.2 \text{ì–µ ì›}$$
$$\text{ì–‘ë„ì°¨ìµ} = 40.2 - 31 - 0.2 = 9 \text{ì–µ ì›}$$

**Step 2. ì„¸ê¸ˆ ë° ìˆœìˆ˜ìµ A** (66% ì¤‘ê³¼ì„¸)
$$\text{ì„¸ê¸ˆ} = 9 \times 0.66 = 5.94 \text{ì–µ ì›}$$
$$A = 9 - 5.94 - 0.5(\text{ì´ì}) = 2.56 \text{ì–µ ì›}$$

**Case B ($x=2.5$): ì¼ë°˜ ë§¤ë„**

**Step 3. ë§¤ë„ê°€ ë° ì–‘ë„ì°¨ìµ**
$$y(2.5) = -0.8(2.5)^2 + 8(2.5) + 30 = 45 \text{ì–µ ì›}$$
$$\text{ì–‘ë„ì°¨ìµ} = 45 - 31 - 0.2 = 13.8 \text{ì–µ ì›}$$

**Step 4. ì„¸ê¸ˆ ë° ìˆœìˆ˜ìµ B** (33% ì¼ë°˜ì„¸ìœ¨)
$$\text{ì„¸ê¸ˆ} = 13.8 \times 0.33 = 4.554 \text{ì–µ ì›}$$
$$B = 13.8 - 4.554 - 0.8(\text{ì´ì}) = 8.446 \text{ì–µ ì›}$$

**Step 5. ì°¨ì´ ê³„ì‚°**
$$B - A = 8.446 - 2.56 = 5.886 \text{ì–µ ì›}$$

**âœ… ì •ë‹µ: â‘¢ 5.886ì–µ ì›**

---

### ğŸ’¡ ê²½ì œì  í•´ì„

**"ì„¸ê¸ˆ í­íƒ„ì´ íˆ¬ì ìˆ˜ìµë¥ ì„ ê°€ë¥¸ë‹¤"**

ë¶ˆê³¼ 1ë…„ ë” ë³´ìœ í–ˆì„ ë¿ì¸ë°, ì‹œì„¸ ìƒìŠ¹ë¶„(4.8ì–µ)ë³´ë‹¤ **ì„¸ê¸ˆ ì ˆê° íš¨ê³¼(1.386ì–µ)**ë¡œ ì¸í•´ ìˆœìˆ˜ìµì´ 3ë°° ì´ìƒ(2.56ì–µ â†’ 8.446ì–µ) ë›°ì—ˆìŠµë‹ˆë‹¤.

> **í•µì‹¬ ì¸ì‚¬ì´íŠ¸**
> *   1.5ë…„ ë³´ìœ : ì„¸ìœ¨ 66% â†’ ìˆœìˆ˜ìµ 2.56ì–µ (ROI 8.3%)
> *   2.5ë…„ ë³´ìœ : ì„¸ìœ¨ 33% â†’ ìˆœìˆ˜ìµ 8.446ì–µ (ROI 27.2%)
> 
> ì´ëŠ” ë¶€ë™ì‚° ì‹œì¥ì—ì„œ 'ë²„í‹°ê¸°(ì¡´ë²„)'ê°€ ì™œ ìŠ¹ë¦¬í•˜ëŠ”ì§€ ìˆ˜í•™ì ìœ¼ë¡œ ì¦ëª…í•©ë‹ˆë‹¤.
''',
        newsTitle: "ì–‘ë„ì„¸ ë¬´ì„œì›Œ ëª» íŒë‹¤... ê°•ë‚¨ ì•„íŒŒíŠ¸ ë§¤ë¬¼ ì ê¹€ ì‹¬í™”",
        newsUrl: 'https://search.naver.com/search.naver?query=ì–‘ë„ì„¸+ë¬´ì„œì›Œ+ëª»+íŒë‹¤+ê°•ë‚¨+ì•„íŒŒíŠ¸+ë§¤ë¬¼+ì ê¹€',
        mathTopic: 'ì´ì°¨í•¨ìˆ˜ì™€ êµ¬ê°„ë³„ í•¨ìˆ˜ (ê³ ë“±í•™êµ ìˆ˜í•™ I)',
        economicTheme: 'ì–‘ë„ì†Œë“ì„¸ ì¤‘ê³¼ì„¸, ë³´ìœ  ê¸°ê°„ë³„ ì„¸ìœ¨, \'ë˜˜ë˜˜í•œ í•œ ì±„\' ì „ëµ',
      ),

      Problem(
        id: 'p_20251119', // Wed
        date: DateTime(2025, 11, 19),
        title: 'í™˜ìœ¨ê³¼ ì‹¤ì§ˆì‹¤íš¨í™˜ìœ¨: "ë§¥ë¶ í”„ë¡œ ìˆ˜ì… ì›ê°€ í­ë“±ì˜ ë¹„ë°€"',
        content: r'''
1. ë¬¸ì œ ê°œìš” ë° ì„¤ê³„ ì˜ë„
"í™˜ìœ¨ì´ ì˜¤ë¥´ë©´ ìˆ˜ì…í’ˆ ê°€ê²©ë„ ê·¸ë§Œí¼ ì˜¤ë¥¸ë‹¤"ëŠ” ë‹¨ìˆœ ê³„ì‚°ì€ í‹€ë ¸ìŠµë‹ˆë‹¤. **ì‹¤ì§ˆì‹¤íš¨í™˜ìœ¨(REER)**ì€ ì—¬ëŸ¬ êµì—­êµ­ í†µí™” ëŒ€ë¹„ ìƒëŒ€ì  ê°€ì¹˜ë¥¼ ë°˜ì˜í•˜ë¯€ë¡œ, í™˜ìœ¨ ìƒìŠ¹í­ë³´ë‹¤ ì‹¤ì œ ì›ê°€ ì¦ê°€í­ì´ ì‘ìŠµë‹ˆë‹¤. ì´ë¥¼ ì¼ì°¨í•¨ìˆ˜ë¡œ ëª¨ë¸ë§í•˜ì—¬ ì²´í—˜í•©ë‹ˆë‹¤.

2. ë¬¸ì œ ìƒì„¸ (í˜„ì‹¤ ë°ì´í„° ë°˜ì˜)
ì‹œì : 2025ë…„ 10ì›”
[ìƒí™©]
êµ­ì œê²°ì œì€í–‰(BIS) ë°œí‘œì— ë”°ë¥´ë©´, í•œêµ­ì˜ ì‹¤ì§ˆì‹¤íš¨í™˜ìœ¨ì€ 89.09í¬ì¸íŠ¸ë¡œ 2009ë…„ ê¸ˆìœµìœ„ê¸° ì´í›„ ìµœì €ì¹˜ë¥¼ ê¸°ë¡í–ˆìŠµë‹ˆë‹¤. (100 ê¸°ì¤€, ë‚®ì„ìˆ˜ë¡ ì €í‰ê°€)
ì£¼ìš”êµ­ ì‹¤ì§ˆì‹¤íš¨í™˜ìœ¨:
ì¼ë³¸: 70.41
ì¤‘êµ­: 87.94
í•œêµ­: 89.09
ë¯¸êµ­: 104.52

[ì¡°ê±´]
ì„œìš¸ ìš©ì‚°ì˜ ì „ìì œí’ˆ ìˆ˜ì…ì—…ì²´ 'ë””ì§€í„¸í”„ë¼ì'ëŠ” ë¯¸êµ­ ì• í”Œì‚¬ë¡œë¶€í„° **ë§¥ë¶ í”„ë¡œ 14ì¸ì¹˜(M3 Pro, 512GB)**ë¥¼ ìˆ˜ì…í•©ë‹ˆë‹¤.

ë¯¸êµ­ í˜„ì§€ ê°€ê²©: $1,999 (ì•½ 280ë§Œ ì›, í™˜ìœ¨ 1,400ì› ê¸°ì¤€)
ì‹¤ì§ˆì‹¤íš¨í™˜ìœ¨ì´ $x$ í¬ì¸íŠ¸ì¼ ë•Œ, ëŒ€ë‹¹ ì‹¤ì œ ìˆ˜ì… ì›ê°€ í•¨ìˆ˜:
$C(x) = 280 + 1.2(100 - x)$ (ë‹¨ìœ„: ë§Œ ì›)
(ê³„ìˆ˜ 1.2ëŠ” í™˜ìœ¨ ë³€ë™ ë¯¼ê°ë„)

[ì‹œë‚˜ë¦¬ì˜¤]
9ì›” ë§: ì‹¤ì§ˆì‹¤íš¨í™˜ìœ¨ 90.53
í™˜ìœ¨ 1,500ì› ëŒíŒŒ ì‹œ: ì‹¤ì§ˆì‹¤íš¨í™˜ìœ¨ 86.59ë¡œ í•˜ë½ ì „ë§
''',
        question: 'ë§¥ë¶ í”„ë¡œ 100ëŒ€ë¥¼ ìˆ˜ì…í•  ë•Œ, í™˜ìœ¨ 1,500ì› ëŒíŒŒ ì‹œ(ì‹¤ì§ˆì‹¤íš¨í™˜ìœ¨ 86.59) 9ì›” ë§(ì‹¤ì§ˆì‹¤íš¨í™˜ìœ¨ 90.53) ëŒ€ë¹„ ì´ ìˆ˜ì… ì›ê°€ëŠ” ì–¼ë§ˆë‚˜ ì¦ê°€í•©ë‹ˆê¹Œ?',
        choices: ['â‘  ì•½ 378ë§Œ ì›', 'â‘¡ ì•½ 468ë§Œ ì›', 'â‘¢ ì•½ 558ë§Œ ì›', 'â‘£ ì•½ 648ë§Œ ì›', 'â‘¤ ì•½ 738ë§Œ ì›'],
        correctAnswer: '2',
        explanation: r'''
### ğŸ“ ì •ë‹µ ë° í’€ì´

**Step 1. 9ì›” ë§ ëŒ€ë‹¹ ìˆ˜ì… ì›ê°€**
$$C(90.53) = 280 + 1.2(100 - 90.53) = 291.364 \text{ë§Œ ì›}$$
$$\text{100ëŒ€ ì´ ì›ê°€} = 291.364 \times 100 = 29,136.4 \text{ë§Œ ì›}$$

**Step 2. í™˜ìœ¨ 1,500ì› ëŒíŒŒ ì‹œ ëŒ€ë‹¹ ìˆ˜ì… ì›ê°€**
$$C(86.59) = 280 + 1.2(100 - 86.59) = 296.092 \text{ë§Œ ì›}$$
$$\text{100ëŒ€ ì´ ì›ê°€} = 296.092 \times 100 = 29,609.2 \text{ë§Œ ì›}$$

**Step 3. ì´ ì›ê°€ ì¦ê°€ë¶„ ê³„ì‚°**
$$29,609.2 - 29,136.4 = 472.8 \text{ë§Œ ì›} \approx 468 \text{ë§Œ ì›}$$

**âœ… ì •ë‹µ: â‘¡ ì•½ 468ë§Œ ì›**

---

### ğŸ’¡ ê²½ì œì  í•´ì„

**"í™˜ìœ¨ 10% ìƒìŠ¹ â‰  ìˆ˜ì…ê°€ 10% ìƒìŠ¹"**

* **í™˜ìœ¨**: 1,400ì› â†’ 1,500ì› (7.1% ìƒìŠ¹)
* **ì‹¤ì§ˆì‹¤íš¨í™˜ìœ¨**: 90.53 â†’ 86.59 (4.35% í•˜ë½)
* **ì‹¤ì œ ì›ê°€**: 291.4ë§Œ ì› â†’ 296.1ë§Œ ì› (1.62% ìƒìŠ¹)

> **ë°˜ì§ê´€ì  ì¸ì‚¬ì´íŠ¸**
>
> * **ì¼ë³¸(70.41)ì˜ ê³ í†µ**: ê·¹ë‹¨ì  ì—”ì €ë¡œ ê°™ì€ ë§¥ë¶ì´ í•œêµ­ë³´ë‹¤ 20ë§Œ ì› ë” ë¹„ìŒ‰ë‹ˆë‹¤.
> * **ë¯¸êµ­(104.52)ì˜ íŠ¹ê¶Œ**: ë‹¬ëŸ¬ ê°•ì„¸ë¡œ ì „ ì„¸ê³„ ìƒí’ˆì„ í• ì¸ê°€ë¡œ êµ¬ë§¤ ê°€ëŠ¥í•©ë‹ˆë‹¤.
''',
        newsTitle: "ì›í™” ì•½ì„¸ì— ìˆ˜ì… ë¬¼ê°€ ìƒìŠ¹... ì‹¤ì§ˆì‹¤íš¨í™˜ìœ¨ 15ë…„ ë§Œì— ìµœì €",
        newsUrl: 'https://search.naver.com/search.naver?query=ì›í™”+ì•½ì„¸+ìˆ˜ì…+ë¬¼ê°€+ìƒìŠ¹+ì‹¤ì§ˆì‹¤íš¨í™˜ìœ¨',
        mathTopic: 'ì¼ì°¨í•¨ìˆ˜ì™€ í•¨ìˆ«ê°’ ê³„ì‚° (ì¤‘í•™êµ 1í•™ë…„ ~ ê³ ë“±í•™êµ ìˆ˜í•™ I)',
        economicTheme: 'ì‹¤ì§ˆì‹¤íš¨í™˜ìœ¨(REER), í™˜ìœ¨ ë³€ë™, ìˆ˜ì… ì›ê°€',
      ),
      Problem(
        id: 'p_20251120', // Thu
        date: DateTime(2025, 11, 20),
        title: 'ë¹„íŠ¸ì½”ì¸ ì±„êµ´: "ë‚œì´ë„ ì¡°ì •ê³¼ ìˆ˜ìµ ê¸‰ê°"',
        content: r'''
1. ë¬¸ì œ ê°œìš” ë° ì„¤ê³„ ì˜ë„
ë¹„íŠ¸ì½”ì¸ ë„¤íŠ¸ì›Œí¬ëŠ” ë¸”ë¡ ìƒì„± ì‹œê°„ì„ 10ë¶„ìœ¼ë¡œ ìœ ì§€í•˜ê¸° ìœ„í•´ 2ì£¼ë§ˆë‹¤ ë‚œì´ë„ë¥¼ ìë™ ì¡°ì ˆí•©ë‹ˆë‹¤. ì±„êµ´ê¸°ê°€ ëŠ˜ì–´ë‚˜ë©´ ë‚œì´ë„ê°€ ìƒìŠ¹í•˜ê³ , ê°œë³„ ì±„êµ´ìì˜ ìˆ˜ìµì€ ë‚œì´ë„ì— ë°˜ë¹„ë¡€í•˜ì—¬ ê°ì†Œí•©ë‹ˆë‹¤. ì´ë¥¼ ìˆ˜í•™ì ìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.

2. ë¬¸ì œ ìƒì„¸ (í˜„ì‹¤ ë°ì´í„° ë°˜ì˜)
ì‹œì : 2025ë…„ 11ì›”
[ìƒí™©]
2025ë…„ 11ì›” ì…‹ì§¸ ì£¼, ë¹„íŠ¸ì½”ì¸ ë„¤íŠ¸ì›Œí¬ì˜ ë‚œì´ë„ ì¡°ì • ì‹œê¸°ê°€ ë„ë˜í–ˆìŠµë‹ˆë‹¤. ì „ ì„¸ê³„ì ì¸ ì±„êµ´ê¸° ì¦ì„¤ë¡œ ë¸”ë¡ ìƒì„± ì†ë„ê°€ ë¹¨ë¼ì¡ŒìŠµë‹ˆë‹¤.
[ë°ì´í„°]

ê¸°ì¡´ ë‚œì´ë„: 100.00 T (Trillion)
ëª©í‘œ ì‹œê°„ (2,016 ë¸”ë¡): 2ì£¼ = 20,160ë¶„
ì‹¤ì œ ì†Œìš” ì‹œê°„: 1ì£¼ 5ì¼ = 12ì¼ = 17,280ë¶„

[ì±„êµ´ì ìƒí™©]
ê¹€ ì”¨ëŠ” í•˜ë£¨ì— 20,000ì›ì˜ ì±„êµ´ ìˆ˜ìµ(ì „ê¸°ë£Œ ì°¨ê° ì „)ì„ ì˜¬ë¦¬ê³  ìˆì—ˆìŠµë‹ˆë‹¤.
[ê°€ì •]

ë¹„íŠ¸ì½”ì¸ ê°€ê²©ì€ ë³€ë™ ì—†ìŒ
ê¹€ ì”¨ì˜ í•´ì‹œë ˆì´íŠ¸ëŠ” ì¼ì •
ì±„êµ´ ìˆ˜ìµì€ ë‚œì´ë„ì— ì •í™•íˆ ë°˜ë¹„ë¡€ (ìˆ˜ìµ $\propto$ 1/ë‚œì´ë„)
''',
        question: r'''ì¡°ì •ëœ 'ìƒˆë¡œìš´ ë‚œì´ë„'ì™€ ì¡°ì • ì§í›„ ê¹€ ì”¨ì˜ 'ì˜ˆìƒ ì¼ì¼ ìˆ˜ìµ'ìœ¼ë¡œ ê°€ì¥ ì ì ˆí•œ ì¡°í•©ì„ ì„ íƒí•˜ì„¸ìš”.
(ì†Œìˆ˜ì  ë‘˜ì§¸ ìë¦¬ ë°˜ì˜¬ë¦¼)''',
        choices: ['â‘  116.67 T, 17,140ì›', 'â‘¡ 116.67 T, 23,330ì›', 'â‘¢ 85.71 T, 17,140ì›', 'â‘£ 85.71 T, 23,330ì›', 'â‘¤ 100.00 T, 20,000ì›'],
        correctAnswer: '1',
        explanation: r'''
### ğŸ“ ì •ë‹µ ë° í’€ì´

**Step 1. ìƒˆë¡œìš´ ë‚œì´ë„ ê³„ì‚°**
$$\text{ë‚œì´ë„} = 100.00 \times \frac{20,160}{17,280} \approx 116.67 \text{ T}$$

**Step 2. ìƒˆë¡œìš´ ì¼ì¼ ìˆ˜ìµ ê³„ì‚°** (ì—­ë¹„ë¡€ ê´€ê³„)
$$\text{ìƒˆ ìˆ˜ìµ} = 20,000 \times \frac{100.00}{116.67} \approx 17,140 \text{ì›}$$

**âœ… ì •ë‹µ: â‘  116.67 T, 17,140ì›**

---

### ğŸ’¡ ê²½ì œì  í•´ì„

**"ì±„êµ´ ê²½ìŸì˜ ëƒ‰í˜¹í•œ í˜„ì‹¤"**

ì±„êµ´ ê²½ìŸì´ ì¹˜ì—´í•´ì§€ë©´ì„œ ë‚œì´ë„ëŠ” **16.67% ìƒìŠ¹**í–ˆê³ , ìˆ˜ìµì€ **14.3% ê°ì†Œ**(20,000ì› â†’ 17,140ì›)í–ˆìŠµë‹ˆë‹¤.

> **Shut-down ìœ„ê¸°**
>
> ë¹„íŠ¸ì½”ì¸ ê°€ê²©ì´ ìƒìŠ¹í•˜ì§€ ì•ŠëŠ” í•œ, êµ¬í˜• ì±„êµ´ê¸°ëŠ” ì „ê¸°ë£Œë¥¼ ê°ë‹¹í•˜ì§€ ëª»í•´ ê°€ë™ ì¤‘ë‹¨ì— ì§ë©´í•©ë‹ˆë‹¤.
> ë§Œì•½ ì „ê¸°ë£Œê°€ ì¼ 15,000ì›ì´ë¼ë©´, ìˆœìˆ˜ìµì€ 2,140ì›ì— ë¶ˆê³¼í•˜ë©°, ì „ê¸°ë£Œê°€ ì¡°ê¸ˆë§Œ ë” ì˜¤ë¥´ë©´ ì ìë¡œ ì „í™˜ë©ë‹ˆë‹¤.
''',
        newsTitle: "ë¹„íŠ¸ì½”ì¸ 4ë²ˆì§¸ ë°˜ê°ê¸° ì™„ë£Œ... ì±„êµ´ ë‚œì´ë„ ì‚¬ìƒ ìµœê³ ì¹˜ ê²½ì‹ ",
        newsUrl: 'https://search.naver.com/search.naver?query=ë¹„íŠ¸ì½”ì¸+4ë²ˆì§¸+ë°˜ê°ê¸°+ì±„êµ´+ë‚œì´ë„',
        mathTopic: 'ë¹„ë¡€ì‹ê³¼ ì—­ë¹„ë¡€ ê´€ê³„ (ì¤‘í•™êµ 2í•™ë…„)',
        economicTheme: 'ì•”í˜¸í™”í ì±„êµ´ ë‚œì´ë„(Difficulty), ì‘ì—… ì¦ëª…(PoW), ìˆ˜ìµì„±',
      ),
      Problem(
        id: 'p_20251121', // Fri
        date: DateTime(2025, 11, 21),
        title: 'ë°°ë‹¹ íˆ¬ì: "í˜„ëŒ€ì°¨2ìš°Bì˜ ì‹¤ì§ˆ ìˆ˜ìµ"',
        content: r'''
1. ë¬¸ì œ ê°œìš” ë° ì„¤ê³„ ì˜ë„
'ì½”ë¦¬ì•„ ë””ìŠ¤ì¹´ìš´íŠ¸' í•´ì†Œë¥¼ ìœ„í•œ ë°¸ë¥˜ì—… í”„ë¡œê·¸ë¨ì˜ ì¼í™˜ìœ¼ë¡œ, í˜„ëŒ€ìë™ì°¨ëŠ” ì£¼ì£¼í™˜ì› ì •ì±…ì„ ê°•í™”í–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ **ìš°ì„ ì£¼(2ìš°B)**ëŠ” ì˜ê²°ê¶Œì€ ì—†ì§€ë§Œ ë°°ë‹¹ ìˆ˜ìµë¥ ì´ ë†’ì•„ ì±„ê¶Œí˜• íˆ¬ììì—ê²Œ ì¸ê¸°ì…ë‹ˆë‹¤. ëª…ëª© ë°°ë‹¹ë¥ ë¿ë§Œ ì•„ë‹ˆë¼ ì„¸í›„ ì‹¤ì§ˆ ìˆ˜ìµì„ ê³„ì‚°í•˜ëŠ” ì—°ìŠµì„ í•©ë‹ˆë‹¤.

2. ë¬¸ì œ ìƒì„¸ (í˜„ì‹¤ ë°ì´í„° ë°˜ì˜)
ì‹œì : 2025ë…„ ì´ˆ
ê·€í•˜ëŠ” ì€í‡´ ìê¸ˆ ìš´ìš©ì„ ìœ„í•´ í˜„ëŒ€ì°¨2ìš°B (005387) 100ì£¼ë¥¼ ë§¤ìˆ˜í•˜ì—¬ 1ë…„ê°„ ë³´ìœ í–ˆìŠµë‹ˆë‹¤.
[íˆ¬ì ì¡°ê±´]

í‰ê·  ë§¤ìˆ˜ ë‹¨ê°€: 150,000ì› (1ì£¼ë‹¹)
ë³´ìœ  ì£¼ì‹ ìˆ˜: 100ì£¼
ì—°ê°„ ì´ ë°°ë‹¹ê¸ˆ: 11,000ì› (1ì£¼ë‹¹, 1~4ë¶„ê¸° í•©ì‚°)
ë°°ë‹¹ì†Œë“ì„¸: 14% + ì§€ë°©ì†Œë“ì„¸ 1.4% = ì´ 15.4% (ì›ì²œì§•ìˆ˜)
''',
        question: 'ì´ íˆ¬ìì˜ (1) ì„¸ì „ ì‹œê°€ë°°ë‹¹ë¥ (%)ê³¼ (2) ì„¸í›„ ì‹¤ì œ ìˆ˜ë ¹í•˜ëŠ” ì´ ë°°ë‹¹ê¸ˆì•¡(100ì£¼ ê¸°ì¤€)ìœ¼ë¡œ ê°€ì¥ ì ì ˆí•œ ì¡°í•©ì„ ì„ íƒí•˜ì„¸ìš”.',
        choices: ['â‘  7.33%, 930,600ì›', 'â‘¡ 7.33%, 1,100,000ì›', 'â‘¢ 6.50%, 930,600ì›', 'â‘£ 8.50%, 1,000,000ì›', 'â‘¤ 5.50%, 850,000ì›'],
        correctAnswer: '1',
        explanation: r'''
### ğŸ“ ì •ë‹µ ë° í’€ì´

**Step 1. ì„¸ì „ ì‹œê°€ë°°ë‹¹ë¥  ê³„ì‚°**
$$\text{ì‹œê°€ë°°ë‹¹ë¥ } = \frac{11,000}{150,000} \times 100 = 7.33\%$$

**Step 2. ì„¸ì „ ì´ ë°°ë‹¹ê¸ˆ**
$$11,000 \text{ì›} \times 100 \text{ì£¼} = 1,100,000 \text{ì›}$$

**Step 3. ì„¸í›„ ì‹¤ì œ ìˆ˜ë ¹ì•¡** (ì„¸ìœ¨ 15.4%)
$$\text{ì„¸í›„ ìˆ˜ë ¹ì•¡} = 1,100,000 \times (1 - 0.154) = 930,600 \text{ì›}$$

**âœ… ì •ë‹µ: â‘  7.33%, 930,600ì›**

---

### ğŸ’¡ ê²½ì œì  í•´ì„

**"ì„¸í›„ ìˆ˜ìµë¥ ì´ ì§„ì§œë‹¤"**

**ì„¸ì „ ìˆ˜ìµë¥  7.33%**ëŠ” 2025ë…„ ì •ê¸°ì˜ˆê¸ˆ ê¸ˆë¦¬(2.5~3.0%)ë¥¼ í¬ê²Œ ìƒíšŒí•˜ëŠ” ë§¤ë ¥ì ì¸ ìˆ˜ì¤€ì…ë‹ˆë‹¤. ë‹¤ë§Œ **ë°°ë‹¹ì†Œë“ì„¸ 15.4%**ë¥¼ ì œí•˜ë©´ ì‹¤ì§ˆ ìˆ˜ìµë¥ ì€ **6.20%**ë¡œ ë‚®ì•„ì§‘ë‹ˆë‹¤.

> **íˆ¬ì ì‹œ ê³ ë ¤ì‚¬í•­**
>
> *   **ì£¼ê°€ ë³€ë™ ë¦¬ìŠ¤í¬**: ë°°ë‹¹ì„ ë°›ë”ë¼ë„ ì£¼ê°€ê°€ 10% í•˜ë½í•˜ë©´ ì´ìˆ˜ìµì€ ë§ˆì´ë„ˆìŠ¤ì…ë‹ˆë‹¤.
> *   **ë¶„ê¸° ë°°ë‹¹ íƒ€ì´ë°**: ë°°ë‹¹ë½ì¼ ì „ê¹Œì§€ ë³´ìœ í•´ì•¼ ë°°ë‹¹ê¸ˆì„ ìˆ˜ë ¹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> *   **ì¥ê¸° íˆ¬ì ì „ëµ**: í˜„ëŒ€ì°¨ì˜ ë¶„ê¸° ë°°ë‹¹ ì •ë¡€í™”ë¡œ ë³µë¦¬ íš¨ê³¼ë¥¼ ê¸°ëŒ€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
''',
        newsTitle: "í˜„ëŒ€ì°¨, ë°¸ë¥˜ì—… í”„ë¡œê·¸ë¨ ë³¸ê²©í™”... ë¶„ê¸° ë°°ë‹¹Â·ìì‚¬ì£¼ ì†Œê° í™•ëŒ€",
        newsUrl: 'https://search.naver.com/search.naver?query=í˜„ëŒ€ì°¨+ë°¸ë¥˜ì—…+í”„ë¡œê·¸ë¨+ë¶„ê¸°+ë°°ë‹¹+ìì‚¬ì£¼+ì†Œê°',
        mathTopic: 'ë°±ë¶„ìœ¨ ê³„ì‚°ê³¼ ì„¸ê¸ˆ ê³µì œ (ì¤‘í•™êµ 1í•™ë…„)',
        economicTheme: 'ì£¼ì£¼í™˜ì› ì •ì±…, ë°°ë‹¹ìˆ˜ìµë¥ , ë°°ë‹¹ì†Œë“ì„¸',
      ),
      Problem(
        id: 'p_20251122',
        date: DateTime(2025, 11, 22),
        title: 'ë°°ë‹¹ì†Œë“ ë¶„ë¦¬ê³¼ì„¸: "357ì¡° ì˜ˆê¸ˆ, ì¦ì‹œë¡œ ì´ë™í•˜ë‚˜"',
        content: r'''
[í† ìš”ì¼] ë°°ë‹¹ì†Œë“ ë¶„ë¦¬ê³¼ì„¸: "357ì¡° ì˜ˆê¸ˆ, ì¦ì‹œë¡œ ì´ë™í•˜ë‚˜"
ìˆ˜í•™ì  ì£¼ì œ: ë°±ë¶„ìœ¨ ê³„ì‚°ê³¼ ì„¸ê¸ˆ ë¹„êµ (ì¤‘í•™êµ 1í•™ë…„ ~ ê³ ë“±í•™êµ ìˆ˜í•™ I)
ê²½ì œì  í…Œë§ˆ: ë°°ë‹¹ì†Œë“ì„¸, ì¢…í•©ê³¼ì„¸ vs ë¶„ë¦¬ê³¼ì„¸, ì‹¤ì§ˆ ìˆ˜ìµë¥ 

1. ë¬¸ì œ ê°œìš” ë° ì„¤ê³„ ì˜ë„
êµ­íšŒì—ì„œ ë°°ë‹¹ì†Œë“ ë¶„ë¦¬ê³¼ì„¸ê°€ ë³¸ê²© ë…¼ì˜ë˜ë©´ì„œ íˆ¬ììë“¤ì˜ ê´€ì‹¬ì´ ì§‘ì¤‘ë˜ê³  ìˆìŠµë‹ˆë‹¤. ê¸°ì¡´ ì¢…í•©ê³¼ì„¸(ìµœê³  45%)ì™€ ìƒˆë¡œìš´ ë¶„ë¦¬ê³¼ì„¸(25%)ì˜ ì„¸í›„ ìˆ˜ìµì„ ì§ì ‘ ê³„ì‚°í•˜ì—¬, ì–´ë–¤ ë°©ì‹ì´ ìœ ë¦¬í•œì§€ íŒë‹¨í•˜ëŠ” ì—°ìŠµì„ í•©ë‹ˆë‹¤.

2. ë¬¸ì œ ìƒì„¸ (í˜„ì‹¤ ë°ì´í„° ë°˜ì˜)
ì‹œì : 2024ë…„ 11ì›”
[ìƒí™©]
êµ­íšŒ ê¸°íšì¬ì •ìœ„ì›íšŒ ì¡°ì„¸ì†Œìœ„ëŠ” ë°°ë‹¹ì†Œë“ ë¶„ë¦¬ê³¼ì„¸ ì„¸ìœ¨ì„ ì •ë¶€ì•ˆ 35%ì—ì„œ 25%ë¡œ ë‚®ì¶”ëŠ” ë°©ì•ˆì— í•©ì˜í–ˆìŠµë‹ˆë‹¤. ë°°ë‹¹ì„±í–¥ 35% ì´ìƒ ê¸°ì—…ì— íˆ¬ìí•˜ë©´ ë¶„ë¦¬ê³¼ì„¸ í˜œíƒì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë°• ì”¨ëŠ” ê³ ë°°ë‹¹ì£¼ì— 1ì–µ ì›ì„ íˆ¬ìí•˜ì—¬ ì—°ê°„ ë°°ë‹¹ì†Œë“ 2,000ë§Œ ì›ì„ ë°›ê³  ìˆìŠµë‹ˆë‹¤. ë°• ì”¨ì˜ ë‹¤ë¥¸ ì†Œë“(ê·¼ë¡œÂ·ì‚¬ì—…ì†Œë“ ë“±)ê³¼ í•©ì‚°í•œ ì¢…í•©ì†Œë“ì€ ê³¼ì„¸í‘œì¤€ 8,800ë§Œ ì› êµ¬ê°„(ì„¸ìœ¨ 35%)ì— í•´ë‹¹í•©ë‹ˆë‹¤.

[ì¡°ê±´]
â€¢ ì¢…í•©ê³¼ì„¸: ë°°ë‹¹ì†Œë“ì„ ë‹¤ë¥¸ ì†Œë“ê³¼ í•©ì‚°í•˜ì—¬ ê³¼ì„¸
  - ê³¼ì„¸í‘œì¤€ 8,800ë§Œ ì› ì´ˆê³¼ ì‹œ ì„¸ìœ¨ 35% + ì§€ë°©ì†Œë“ì„¸ 3.5% = 38.5%
â€¢ ë¶„ë¦¬ê³¼ì„¸(ì‹ ê·œ): ë°°ë‹¹ì†Œë“ë§Œ ë³„ë„ë¡œ ê³¼ì„¸
  - ì„¸ìœ¨ 25% (ì§€ë°©ì†Œë“ì„¸ í¬í•¨, ë‹¨ì¼ ì„¸ìœ¨)
â€¢ ë°°ë‹¹ì†Œë“: 2,000ë§Œ ì›

[ë¹„êµ ëŒ€ìƒ]
1) ì¢…í•©ê³¼ì„¸ ì ìš© ì‹œ: ë°°ë‹¹ì†Œë“ Ã— 38.5%
2) ë¶„ë¦¬ê³¼ì„¸ ì ìš© ì‹œ: ë°°ë‹¹ì†Œë“ Ã— 25%
''',
        question: 'ë°• ì”¨ê°€ ë¶„ë¦¬ê³¼ì„¸ë¥¼ ì„ íƒí•¨ìœ¼ë¡œì¨ ì ˆê°í•˜ëŠ” ì„¸ê¸ˆì€ ì–¼ë§ˆì´ë©°, ì„¸í›„ ì‹¤ì œ ìˆ˜ë ¹ì•¡ì€ ì–¼ë§ˆì…ë‹ˆê¹Œ?',
        choices: ['â‘  ì„¸ê¸ˆ ì ˆê°: 270ë§Œ ì›, ìˆ˜ë ¹ì•¡: 1,500ë§Œ ì›', 'â‘¡ ì„¸ê¸ˆ ì ˆê°: 270ë§Œ ì›, ìˆ˜ë ¹ì•¡: 1,730ë§Œ ì›', 'â‘¢ ì„¸ê¸ˆ ì ˆê°: 230ë§Œ ì›, ìˆ˜ë ¹ì•¡: 1,500ë§Œ ì›', 'â‘£ ì„¸ê¸ˆ ì ˆê°: 230ë§Œ ì›, ìˆ˜ë ¹ì•¡: 1,770ë§Œ ì›', 'â‘¤ ì„¸ê¸ˆ ì ˆê°: 200ë§Œ ì›, ìˆ˜ë ¹ì•¡: 1,800ë§Œ ì›'],
        correctAnswer: '1',
        explanation: r'''
### ğŸ“ ì •ë‹µ ë° í’€ì´

**Step 1. ì¢…í•©ê³¼ì„¸ ì‹œ ì„¸ê¸ˆ ê³„ì‚°**
$$2,000\text{ë§Œ ì›} \times 0.385 = 770\text{ë§Œ ì›}$$
$$\text{ì„¸í›„ ìˆ˜ë ¹ì•¡} = 2,000 - 770 = 1,230\text{ë§Œ ì›}$$

**Step 2. ë¶„ë¦¬ê³¼ì„¸ ì‹œ ì„¸ê¸ˆ ê³„ì‚°**
$$2,000\text{ë§Œ ì›} \times 0.25 = 500\text{ë§Œ ì›}$$
$$\text{ì„¸í›„ ìˆ˜ë ¹ì•¡} = 2,000 - 500 = 1,500\text{ë§Œ ì›}$$

**Step 3. ì ˆê° ì„¸ê¸ˆ ë° ìµœì¢… ìˆ˜ë ¹ì•¡**
$$\text{ì„¸ê¸ˆ ì ˆê°} = 770 - 500 = 270\text{ë§Œ ì›}$$
$$\text{ìµœì¢… ìˆ˜ë ¹ì•¡} = 1,500\text{ë§Œ ì›}$$

**âœ… ì •ë‹µ: â‘  ì„¸ê¸ˆ ì ˆê°: 270ë§Œ ì›, ìˆ˜ë ¹ì•¡: 1,500ë§Œ ì›**

---

### ğŸ’¡ ê²½ì œì  í•´ì„

**"357ì¡° ì˜ˆê¸ˆ, ê³ ë°°ë‹¹ì£¼ë¡œ ì´ë™í•˜ë‚˜"**

êµ­ì„¸ì²­ ìë£Œì— ë”°ë¥´ë©´ 2023ë…„ ê¸°ì¤€ 2,000ë§Œ ì› ì´ìƒ ì´ìì†Œë“ìê°€ ë³´ìœ í•œ ì˜ˆê¸ˆ ê·œëª¨ëŠ” 357ì¡° ì›ì— ë‹¬í•©ë‹ˆë‹¤. ë°°ë‹¹ì†Œë“ ë¶„ë¦¬ê³¼ì„¸ê°€ ì‹œí–‰ë˜ë©´ ì´ ê±°ì•¡ì˜ ì¼ë¶€ê°€ ì€í–‰ ì˜ˆê¸ˆì—ì„œ ê³ ë°°ë‹¹ì£¼ë¡œ ì´ë™í•  ê²ƒìœ¼ë¡œ ì˜ˆìƒë©ë‹ˆë‹¤.

> **í•µì‹¬ ì¸ì‚¬ì´íŠ¸**
>
> * **ì„¸ê¸ˆ ì ˆê° íš¨ê³¼**: ì¢…í•©ê³¼ì„¸ ëŒ€ë¹„ 13.5%p(38.5% â†’ 25%) ì„¸ìœ¨ ì¸í•˜
> * **ìˆ˜í˜œ ì—…ì¢…**: ì€í–‰(54%), ë³´í—˜(36%), ì¡°ì„ (35%) ë“± ê³ ë°°ë‹¹ ì—…ì¢…
> * **ìê¸ˆ ì´ë™ ê·œëª¨**: 357ì¡° ì› ì¤‘ ì¼ë¶€ê°€ ì¦ì‹œë¡œ ìœ ì… ì „ë§
> * **ì˜ˆê¸ˆ ê¸ˆë¦¬ 3% vs ë°°ë‹¹ìˆ˜ìµë¥  7%**: ë¶„ë¦¬ê³¼ì„¸ ì ìš© ì‹œ ë°°ë‹¹ì£¼ê°€ ë” ìœ ë¦¬
>
> ë‹¤ë§Œ ì£¼ê°€ ë³€ë™ ë¦¬ìŠ¤í¬ë¥¼ ê°ì•ˆí•´ì•¼ í•˜ë©°, ë°°ë‹¹ì„±í–¥ 35% ê¸°ì¤€ì„ ì¶©ì¡±í•˜ëŠ” ê¸°ì—…ì„ ì„ ë³„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
''',
        newsTitle: "ë°°ë‹¹ì†Œë“ ë¶„ë¦¬ê³¼ì„¸ ë…¼ì˜ ë³¸ê²©í™”... ì€í–‰Â·ë³´í—˜Â·ì¡°ì„ ì£¼ ìˆ˜í˜œ ì „ë§",
        newsUrl: 'https://n.news.naver.com/article/008/0005282304',
        mathTopic: 'ë°±ë¶„ìœ¨ ê³„ì‚°ê³¼ ì„¸ê¸ˆ ë¹„êµ (ì¤‘í•™êµ 1í•™ë…„ ~ ê³ ë“±í•™êµ ìˆ˜í•™ I)',
        economicTheme: 'ë°°ë‹¹ì†Œë“ì„¸, ì¢…í•©ê³¼ì„¸ vs ë¶„ë¦¬ê³¼ì„¸, ì‹¤ì§ˆ ìˆ˜ìµë¥ ',
      ),
      Problem(
        id: 'p_20251124', // Mon (Week 48)
        date: DateTime(2025, 11, 24),
        title: 'í˜„ëŒ€ì°¨ê·¸ë£¹ GBC ë¶€ì§€ íˆ¬ì: "10ì¡°ì› ê³ ê°€ë§¤ì… ë…¼ë€, 11ë…„ í›„ í‰ê°€ì•¡ 22ì¡°ì›"',
        content: r'''
1. ë¬¸ì œ ê°œìš” ë° ì„¤ê³„ ì˜ë„
2014ë…„ í˜„ëŒ€ì°¨ê·¸ë£¹ì˜ ì‚¼ì„±ë™ í•œêµ­ì „ë ¥ ë¶€ì§€ ë§¤ì…ì€ ë‹¹ì‹œ 'ì²œë¬¸í•™ì  ê°€ê²©'ìœ¼ë¡œ ë…¼ë€ì´ ë˜ì—ˆìœ¼ë‚˜, 11ë…„ì´ ì§€ë‚œ í˜„ì¬ ê°€ì¹˜ê°€ 2ë°° ì´ìƒ ìƒìŠ¹í•œ ì‹¤ì œ ì‚¬ë¡€ì…ë‹ˆë‹¤. êµ¬ì²´ì ì¸ ê±°ë˜ ê¸ˆì•¡ê³¼ ìœ„ì¹˜ë¥¼ ëª…ì‹œí•˜ì—¬ ë¶€ë™ì‚° íˆ¬ìì˜ ì¥ê¸° ìˆ˜ìµë¥ ì„ ìˆ˜í•™ì ìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.

2. ë¬¸ì œ ìƒì„¸ (í˜„ì‹¤ ë°ì´í„° ë°˜ì˜)
ì‹œì : 2014ë…„ 9ì›” (ë§¤ì…) â†’ 2025ë…„ í˜„ì¬
[ìƒí™©]
í˜„ëŒ€ìë™ì°¨ê·¸ë£¹ì˜ ê¸€ë¡œë²Œë¹„ì¦ˆë‹ˆìŠ¤ì„¼í„°(GBC) ë¶€ì§€ íˆ¬ì
â€¢ ë§¤ì…ê°€: 10ì¡° 5,500ì–µ ì› (2014ë…„ 9ì›”)
â€¢ í˜„ì¬ ì¶”ì • ê°€ì¹˜: 22ì¡° 6,477ì–µ ì› (2025ë…„ ê¸°ì¤€)
â€¢ ë³´ìœ  ê¸°ê°„: 11ë…„
â€¢ ë‹¹ì‹œ ê°ì •ê°€(3ì¡° 3,346ì–µ ì›) ëŒ€ë¹„ 3ë°°ê°€ ë„˜ëŠ” 'ê³ ê°€ ë§¤ì…' ë…¼ë€
â€¢ ì£¼ë³€ ê°œë°œ: GTX-A, GTX-C ë…¸ì„  ì‚¼ì„±ì—­ í™˜ìŠ¹ ì˜ˆì •ìœ¼ë¡œ ê°€ì¹˜ ìƒìŠ¹

[ê³µì‹]
â€¢ ì´ ìˆ˜ìµë¥  = (í˜„ì¬ ê°€ì¹˜ - ë§¤ì…ê°€) / ë§¤ì…ê°€ Ã— 100%
â€¢ ì—°í‰ê·  ìˆ˜ìµë¥ (ë³µë¦¬) = [(í˜„ì¬ ê°€ì¹˜ / ë§¤ì…ê°€)^(1/n) - 1] Ã— 100%
''',
        question: 'í˜„ëŒ€ì°¨ê·¸ë£¹ì´ ì´ ë¶€ì§€ë¥¼ ë³´ìœ í•¨ìœ¼ë¡œì¨ ì–»ì€ (1) ì´ í‰ê°€ì°¨ìµ(ì¡° ì› ë‹¨ìœ„)ê³¼ (2) 11ë…„ê°„ ì—°í‰ê·  ìˆ˜ìµë¥ (ë³µë¦¬ ê¸°ì¤€)ë¡œ ê°€ì¥ ì ì ˆí•œ ì¡°í•©ì„ ê³ ë¥´ì‹œì˜¤. (ë‹¨, í˜„ì¬ ê°€ì¹˜ëŠ” 22ì¡° 6,477ì–µ ì›ìœ¼ë¡œ ê³„ì‚°)',
        choices: ['â‘  ì•½ 10.5ì¡° ì›, ì•½ 6.5%', 'â‘¡ ì•½ 11.5ì¡° ì›, ì•½ 7.0%', 'â‘¢ ì•½ 12.1ì¡° ì›, ì•½ 7.3%', 'â‘£ ì•½ 12.1ì¡° ì›, ì•½ 7.5%', 'â‘¤ ì•½ 13.0ì¡° ì›, ì•½ 8.0%'],
        correctAnswer: '3',
        explanation: r'''
### ğŸ“ ì •ë‹µ ë° í’€ì´

**Step 1. ì´ í‰ê°€ì°¨ìµ ê³„ì‚°**
$$\text{í˜„ì¬ ê°€ì¹˜} - \text{ë§¤ì…ê°€} = 22.6477\text{ì¡°} - 10.55\text{ì¡°} = 12.0977\text{ì¡°} \approx 12.1\text{ì¡° ì›}$$

**Step 2. ì´ ìˆ˜ìµë¥  ê³„ì‚°**
$$\frac{12.1}{10.55} \times 100\% \approx 114.7\%$$

**Step 3. ì—°í‰ê·  ìˆ˜ìµë¥  ê³„ì‚° (ë³µë¦¬)**
$$\left[ \left( \frac{22.6477}{10.55} \right)^{\frac{1}{11}} - 1 \right] \times 100\%$$ 
$$= [ (2.1467)^{0.0909} - 1 ] \times 100\%$$ 
$$= [ 1.0723 - 1 ] \times 100\% \approx 7.23\% \approx 7.3\%$$

**âœ… ì •ë‹µ: â‘¢ ì•½ 12.1ì¡° ì›, ì•½ 7.3%**

---

### ğŸ’¡ ê²½ì œì  í•´ì„

**"ì²œë¬¸í•™ì  ê³ ê°€ë§¤ì… ë…¼ë€ì—ì„œ ì„±ê³µì  íˆ¬ìë¡œ"**

2014ë…„ ë‹¹ì‹œ ê°ì •ê°€ì˜ 3ë°°ê°€ ë„˜ëŠ” 'ê³ ê°€ ë§¤ì…'ìœ¼ë¡œ ë¹„íŒë°›ì•˜ìœ¼ë‚˜, 11ë…„ ë§Œì— ê°€ì¹˜ê°€ 2ë°° ì´ìƒ ìƒìŠ¹í•˜ì—¬ ì—°í‰ê·  7.3%ì˜ ì•ˆì •ì  ìˆ˜ìµì„ ì‹¤í˜„í–ˆìŠµë‹ˆë‹¤.

> **í•µì‹¬ ì¸ì‚¬ì´íŠ¸**
>
> * **ë‹¹ì‹œ ë…¼ë€**: 2014ë…„ ê°ì •ê°€ 3.3ì¡° ì› ëŒ€ë¹„ 3ë°° ì´ìƒì¸ 10.55ì¡° ì›ì— ë§¤ì…í•˜ì—¬ 'ë¹„ì‹¸ë‹¤'ëŠ” ë¹„íŒ
> * **í•µì‹¬ íˆ¬ì íŒë‹¨**: ê°•ë‚¨ í•µì‹¬ ì…ì§€(ì‚¼ì„±ì—­, ì½”ì—‘ìŠ¤ ì¸ê·¼)ì˜ í¬ì†Œì„±ê³¼ ë¯¸ë˜ ê°€ì¹˜ ì„ ì 
> * **ê°€ì¹˜ ìƒìŠ¹ ìš”ì¸**: GTX-A, GTX-C í™˜ìŠ¹ì—­ í™•ì •ìœ¼ë¡œ êµí†µ ì¸í”„ë¼ ëŒ€í­ ê°œì„ 
> * **ê¸°íšŒë¹„ìš©**: 10.55ì¡°ë¥¼ ì—° 3% ì •ê¸°ì˜ˆê¸ˆì— ë„£ì—ˆë‹¤ë©´ 14.54ì¡°(ì•½ 4ì¡° ì´ì), ë¶€ë™ì‚° íˆ¬ìë¡œ 12.1ì¡° ì°¨ìµ ì‹¤í˜„
''',
        newsTitle: "10ì¡° ê³ ê°€ë§¤ì… ë…¼ë€ í˜„ëŒ€ì°¨ GBC ë¶€ì§€â€¦ë•…ê°’ 22ì¡°ë¡œ ì˜¬ëë‹¤",
        newsUrl: 'https://www.hankyung.com/economy/article/2021061336171',
        mathTopic: 'ë°±ë¶„ìœ¨ê³¼ ìˆ˜ìµë¥  ê³„ì‚° (ì¤‘í•™êµ 1í•™ë…„ ~ ê³ ë“±í•™êµ ìˆ˜í•™ I)',
        economicTheme: 'ë¶€ë™ì‚° íˆ¬ì, ì¥ê¸° íˆ¬ì ìˆ˜ìµë¥ , ë³µë¦¬ íš¨ê³¼',
      ),
      Problem(
        id: 'p_20251125', // Tue (Week 48)
        date: DateTime(2025, 11, 25),
        title: 'ë¡ ìŠ¤íƒ€ì˜ ìŠ¤íƒ€íƒ€ì›Œ ë§¤ê°: "í™˜ìœ¨ ë³€ë™ì„ í™œìš©í•œ 3ë…„ê°„ 2,510ì–µ ì› ì°¨ìµ"',
        content: r'''
1. ë¬¸ì œ ê°œìš” ë° ì„¤ê³„ ì˜ë„
ì™¸êµ­ê³„ í€ë“œ ë¡ ìŠ¤íƒ€ê°€ 2001ë…„ ìŠ¤íƒ€íƒ€ì›Œë¥¼ ë§¤ì…í•˜ê³  2004ë…„ ë§¤ê°í•˜ëŠ” ê³¼ì •ì—ì„œ ì›í™” ê¸°ì¤€ ì°¨ìµë¿ë§Œ ì•„ë‹ˆë¼ í™˜ìœ¨ ë³€ë™(1,300ì›â†’1,035ì›)ìœ¼ë¡œ ì¸í•œ ì¶”ê°€ ìˆ˜ìµê¹Œì§€ ì–»ì€ ì‹¤ì œ ì‚¬ë¡€ì…ë‹ˆë‹¤. ë‹¬ëŸ¬ íˆ¬ìì ê´€ì ì—ì„œ í™˜ìœ¨ ë³€ë™ì´ ì‹¤ì§ˆ ìˆ˜ìµì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ê³„ì‚°í•©ë‹ˆë‹¤.

2. ë¬¸ì œ ìƒì„¸ (í˜„ì‹¤ ë°ì´í„° ë°˜ì˜)
ì‹œì : 2001ë…„ (ë§¤ì…) â†’ 2004ë…„ 12ì›” (ë§¤ê°)
[ìƒí™©]
ë¡ ìŠ¤íƒ€ í€ë“œ(ë¯¸êµ­)ëŠ” ë‹¬ëŸ¬ë¥¼ ì›í™”ë¡œ í™˜ì „í•˜ì—¬ íˆ¬ìí•˜ê³ , ìˆ˜ìµì„ ë‹¤ì‹œ ë‹¬ëŸ¬ë¡œ í™˜ì „í•˜ì—¬ íšŒìˆ˜í•©ë‹ˆë‹¤.
â€¢ ë§¤ì…: 2001ë…„, 1,000ì–µ ì› (ë‹¹ì‹œ í™˜ìœ¨ 1,300ì›/ë‹¬ëŸ¬)
â€¢ ë§¤ê°: 2004ë…„ 12ì›”, 3,510ì–µ ì› (ë‹¹ì‹œ í™˜ìœ¨ 1,035ì›/ë‹¬ëŸ¬)
â€¢ ë³´ìœ  ê¸°ê°„: 3ë…„

[ì¡°ê±´]
â€¢ ë‹¬ëŸ¬ ìˆ˜ìµ = (ë§¤ê°ê¸ˆì•¡/ë§¤ê°ì‹œí™˜ìœ¨) - (ë§¤ì…ê¸ˆì•¡/ë§¤ì…ì‹œí™˜ìœ¨)
â€¢ 2001ë…„ì€ ë‹·ì»´ ë²„ë¸” ë¶•ê´´ ì—¬íŒŒë¡œ ì›í™” ì•½ì„¸(1,300ì›)ì˜€ìœ¼ë‚˜, 2004ë…„ì€ ìˆ˜ì¶œ í˜¸ì¡°ë¡œ ì›í™” ê°•ì„¸(1,035ì›) ì „í™˜
''',
        question: 'ë¡ ìŠ¤íƒ€ê°€ ìŠ¤íƒ€íƒ€ì›Œ íˆ¬ìë¥¼ í†µí•´ ì–»ì€ (1) ë‹¬ëŸ¬ ê¸°ì¤€ ìˆ˜ìµê¸ˆì•¡(ì–µë‹¬ëŸ¬ ë‹¨ìœ„, ì†Œìˆ˜ì  ì²«ì§¸ìë¦¬)ê³¼ (2) ë¶€ë™ì‚° ì‹œì„¸ ì°¨ìµ 2,510ì–µ ì› ì™¸ì— í™˜ìœ¨ ë³€ë™ìœ¼ë¡œ ì¶”ê°€ë¡œ ì–»ì€ ì°¨ìµì„ ì›í™” ê¸ˆì•¡ìœ¼ë¡œ ê°€ì¥ ì ì ˆí•œ ì¡°í•©ì„ ê³ ë¥´ì‹œì˜¤.',
        choices: ['â‘  ì•½ 2.5ì–µ ë‹¬ëŸ¬, ì•½ 600ì–µ ì›', 'â‘¡ ì•½ 2.6ì–µ ë‹¬ëŸ¬, ì•½ 800ì–µ ì›', 'â‘¢ ì•½ 2.7ì–µ ë‹¬ëŸ¬, ì•½ 900ì–µ ì›', 'â‘£ ì•½ 2.8ì–µ ë‹¬ëŸ¬, ì•½ 1,000ì–µ ì›', 'â‘¤ ì•½ 3.0ì–µ ë‹¬ëŸ¬, ì•½ 1,200ì–µ ì›'],
        correctAnswer: '2',
        explanation: r'''
### ğŸ“ ì •ë‹µ ë° í’€ì´

**Step 1. 2001ë…„ ë§¤ì… ì‹œ ë‹¬ëŸ¬ í™˜ì‚°** (í™˜ìœ¨ 1,300ì›)
$$1,000\text{ì–µ ì›} \div 1,300 = 0.769\text{ì–µ ë‹¬ëŸ¬}$$

**Step 2. 2004ë…„ ë§¤ê° ì‹œ ë‹¬ëŸ¬ í™˜ì‚°** (í™˜ìœ¨ 1,035ì›)
$$3,510\text{ì–µ ì›} \div 1,035 = 3.391\text{ì–µ ë‹¬ëŸ¬}$$

**Step 3. ë‹¬ëŸ¬ ê¸°ì¤€ ì‹¤ì œ ìˆ˜ìµ**
$$3.391 - 0.769 = 2.622 \approx 2.6\text{ì–µ ë‹¬ëŸ¬}$$

**Step 4. í™˜ìœ¨ ë™ê²° ì‹œë‚˜ë¦¬ì˜¤** (1,300ì› ìœ ì§€)
$$3,510\text{ì–µ ì›} \div 1,300 = 2.700\text{ì–µ ë‹¬ëŸ¬}$$
$$\text{ìˆ˜ìµ} = 2.700 - 0.769 = 1.931 \approx 1.9\text{ì–µ ë‹¬ëŸ¬}$$

**Step 5. í™˜ìœ¨ ë³€ë™ìœ¼ë¡œ ì¸í•œ ì¶”ê°€ ì´ë“**
$$2.622 - 1.931 = 0.691 \approx 0.7\text{ì–µ ë‹¬ëŸ¬}$$ 
ì´ë¥¼ ì›í™”ë¡œ í™˜ì‚°í•˜ë©´ ì•½ 800ì–µ ì› ìƒë‹¹ì˜ ì¶”ê°€ ì´ë“ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

**âœ… ì •ë‹µ: â‘¡ ì•½ 2.6ì–µ ë‹¬ëŸ¬, ì•½ 800ì–µ ì›**

---

### ğŸ’¡ ê²½ì œì  í•´ì„

**"í™˜ìœ¨ì´ ìˆ˜ìµì„ ë»¥íŠ€ê¸°í–ˆë‹¤"**

ë¡ ìŠ¤íƒ€ëŠ” ë¶€ë™ì‚° ê°€ê²© ìƒìŠ¹(1,000ì–µâ†’3,510ì–µ)ë¿ë§Œ ì•„ë‹ˆë¼ **í™˜ìœ¨ í•˜ë½(ì›í™” ê°•ì„¸)** ë•ë¶„ì— ë‹¬ëŸ¬ ê¸°ì¤€ ìˆ˜ìµì´ ê·¹ëŒ€í™”ë˜ì—ˆìŠµë‹ˆë‹¤.

> **í•µì‹¬ ì¸ì‚¬ì´íŠ¸**
>
> * **ì›í™” ê°•ì„¸ì˜ ì´ì¤‘ íš¨ê³¼**: ìì‚° ê°€ì¹˜ ìƒìŠ¹ + ë‹¬ëŸ¬ í™˜ì‚° ê°€ì¹˜ ì¦ê°€
> * **í™˜ìœ¨ ê¸°ì—¬ë„**: ì „ì²´ ìˆ˜ìµ 2.6ì–µ ë‹¬ëŸ¬ ì¤‘ ì•½ 27%(0.7ì–µ ë‹¬ëŸ¬)ê°€ í™˜ìœ¨ íš¨ê³¼
> * **ì™¸êµ­ì¸ íˆ¬ìì˜ ë¹„ë°€**: ì™¸êµ­ì¸ë“¤ì€ 'ë¶€ë™ì‚°'ê³¼ 'í†µí™”'ì— ë™ì‹œì— ë² íŒ…í•©ë‹ˆë‹¤. ì›í™”ê°€ ìŒ€ ë•Œ(í™˜ìœ¨ ë†’ì„ ë•Œ) ë“¤ì–´ì™€ì„œ ë¹„ìŒ€ ë•Œ(í™˜ìœ¨ ë‚®ì„ ë•Œ) ë‚˜ê°€ëŠ” ê²ƒì´ ì •ì„ì…ë‹ˆë‹¤.
''',
        newsTitle: "ë¡ ìŠ¤íƒ€, ìŠ¤íƒ€íƒ€ì›Œ ë§¤ê° ì°¨ìµ 2,450ì–µ ì›ì— ë²•ì¸ì„¸ 648ì–µ ì› ë‚©ë¶€ íŒê²°",
        newsUrl: 'https://www.hankookilbo.com/News/Read/201803121445414683',
        mathTopic: 'í™˜ìœ¨ ê³„ì‚°ê³¼ ìˆ˜ìµë¥  (ì¤‘í•™êµ 2í•™ë…„ ~ ê³ ë“±í•™êµ ìˆ˜í•™ I)',
        economicTheme: 'ì™¸í™˜ íˆ¬ì, í™˜ìœ¨ ë³€ë™, êµ­ì œ í€ë“œ íˆ¬ì ì „ëµ',
      ),
    ];

    for (var problem in problems) {
      await _db.collection('problems').doc(problem.id).set(problem.toMap());
    }
  }

  Future<List<Problem>> getProblemsByWeek(DateTime startOfWeek) async {
    final endOfWeek = startOfWeek.add(const Duration(days: 7));

    // ALWAYS try to load from Firebase Firestore first
    print('Loading problems for week $startOfWeek from Firebase Firestore...');

    try {
      final snapshot = await _db
          .collection('problems')
          .where('date', isGreaterThanOrEqualTo: startOfWeek.toIso8601String().split('T')[0])
          .where('date', isLessThan: endOfWeek.toIso8601String().split('T')[0])
          .orderBy('date', descending: false)
          .get();

      if (snapshot.docs.isNotEmpty) {
        final problems = snapshot.docs.map((doc) => Problem.fromMap(doc.data())).toList();
        print('Returning ${problems.length} problems from Firebase Firestore');
        return problems;
      }
    } catch (e) {
      print('Error loading from Firestore: $e');
    }

    // If Firestore fails or has no data, fall back to JSON files
    print('No data in Firestore, falling back to JSON files...');
    final jsonLoader = JsonProblemLoader();
    final problems = <Problem>[];

    // Generate problem IDs for the week (format: p_YYYYMMDD)
    for (int i = 0; i < 7; i++) {
      final date = startOfWeek.add(Duration(days: i));
      final problemId = 'p_${date.year}${date.month.toString().padLeft(2, '0')}${date.day.toString().padLeft(2, '0')}';

      try {
        final problem = await jsonLoader.loadProblem(problemId);
        if (problem != null) {
          problems.add(problem);
          print('Loaded $problemId from JSON: economicInsightData = ${problem.economicInsightData != null ? "YES" : "NO"}');
        }
      } catch (e) {
        print('Could not load problem $problemId from JSON: $e');
      }
    }

    return problems;
  }
  
  Future<bool> hasRevealed(String userId, String problemId) async {
    final doc = await _db.collection('users').doc(userId).collection('revealed_problems').doc(problemId).get();
    return doc.exists;
  }

  Future<void> markRevealed(String userId, String problemId) async {
    await _db.collection('users').doc(userId).collection('revealed_problems').doc(problemId).set({});
  }
  
  Future<bool> hasSolved(String userId, String problemId) async {
    final doc = await _db.collection('users').doc(userId).collection('history').doc(problemId).get();
    return doc.exists;
  }
  
  Future<void> recordAttempt(String userId, String problemId, bool isCorrect, {int timeTakenSeconds = 0}) async {
    // Check if there's an existing attempt
    final docRef = _db.collection('users').doc(userId).collection('history').doc(problemId);
    final docSnapshot = await docRef.get();

    bool finalIsCorrect = isCorrect;

    if (docSnapshot.exists) {
      final existingAttempt = Attempt.fromMap(docSnapshot.data()!);
      // If previously incorrect, it stays incorrect forever.
      if (!existingAttempt.isCorrect) {
        finalIsCorrect = false;
      }
    }

    final attempt = Attempt(
      problemId: problemId,
      isCorrect: finalIsCorrect,
      solvedAt: DateTime.now(),
      timeTakenSeconds: timeTakenSeconds,
    );
    await docRef.set(attempt.toMap());
  }

  Future<List<Attempt>> getHistory(String userId) async {
    final snapshot = await _db
        .collection('users')
        .doc(userId)
        .collection('history')
        .orderBy('solvedAt', descending: true)
        .get();

    return snapshot.docs.map((doc) => Attempt.fromMap(doc.data())).toList();
  }

  Future<Problem?> getProblemById(String problemId) async {
    // ALWAYS try Firebase Firestore first
    print('Trying to load problem $problemId from Firebase Firestore...');

    try {
      final doc = await _db.collection('problems').doc(problemId).get();
      if (doc.exists) {
        final problem = Problem.fromMap(doc.data()!);
        print('Loaded $problemId from Firestore: economicInsightData = ${problem.economicInsightData != null ? "YES" : "NO"}');
        return problem;
      }
    } catch (e) {
      print('Error loading $problemId from Firestore: $e');
    }

    // If Firestore fails or doesn't have the data, fall back to JSON file
    print('Problem $problemId not found in Firestore, trying JSON file...');
    final jsonLoader = JsonProblemLoader();
    try {
      final problem = await jsonLoader.loadProblem(problemId);
      if (problem != null) {
        print('Loaded $problemId from JSON: economicInsightData = ${problem.economicInsightData != null ? "YES" : "NO"}');
        return problem;
      }
    } catch (e) {
      print('Could not load $problemId from JSON: $e');
    }

    return null;
  }

  Future<void> updateUser(User user) async {
    await _db.collection('users').doc(user.id).set(user.toMap());
  }

  Future<User?> getUser(String userId) async {
    final doc = await _db.collection('users').doc(userId).get();
    if (doc.exists) {
      return User.fromMap(doc.data()!);
    }
    return null;
  }

  Future<List<RankingItem>> getRankings() async {
    final usersSnapshot = await _db.collection('users').get();
    final rankings = <RankingItem>[];

    for (final userDoc in usersSnapshot.docs) {
      final user = User.fromMap(userDoc.data());
      final historySnapshot = await _db
          .collection('users')
          .doc(user.id)
          .collection('history')
          .where('isCorrect', isEqualTo: true)
          .get();
      
      rankings.add(RankingItem(
        userId: user.id,
        nickname: user.nickname,
        schoolName: user.schoolName,
        solvedCount: historySnapshot.docs.length,
        rank: 0,
      ));
    }

    rankings.sort((a, b) => b.solvedCount.compareTo(a.solvedCount));

    final rankedList = <RankingItem>[];
    for (int i = 0; i < rankings.length; i++) {
      rankedList.add(RankingItem(
        userId: rankings[i].userId,
        nickname: rankings[i].nickname,
        schoolName: rankings[i].schoolName,
        solvedCount: rankings[i].solvedCount,
        rank: i + 1,
      ));
    }

    return rankedList;
  }

  Future<List<SchoolRankingItem>> getSchoolRankings() async {
    final individualRankings = await getRankings();
    final schoolMap = <String, Map<String, dynamic>>{};

    for (var item in individualRankings) {
      if (!schoolMap.containsKey(item.schoolName)) {
        schoolMap[item.schoolName] = {
          'totalSolvedCount': 0,
          'studentCount': 0,
        };
      }
      schoolMap[item.schoolName]!['totalSolvedCount'] += item.solvedCount;
      schoolMap[item.schoolName]!['studentCount'] += 1;
    }

    final schoolRankings = schoolMap.entries.map((entry) {
      return SchoolRankingItem(
        schoolName: entry.key,
        totalSolvedCount: entry.value['totalSolvedCount'],
        studentCount: entry.value['studentCount'],
        rank: 0,
      );
    }).toList();

    schoolRankings.sort((a, b) => b.totalSolvedCount.compareTo(a.totalSolvedCount));

    final rankedList = <SchoolRankingItem>[];
    for (int i = 0; i < schoolRankings.length; i++) {
      rankedList.add(SchoolRankingItem(
        schoolName: schoolRankings[i].schoolName,
        totalSolvedCount: schoolRankings[i].totalSolvedCount,
        studentCount: schoolRankings[i].studentCount,
        rank: i + 1,
      ));
    }

    return rankedList;
  }

  /// Upload all problems from JSON files to Firebase Firestore
  /// This will overwrite existing problems in Firestore
  Future<void> uploadProblemsFromJson() async {
    print('FirestoreService: Uploading problems from JSON files...');

    final jsonLoader = JsonProblemLoader();

    // List of problem IDs to upload (you can expand this list)
    final problemIds = [
      'p_20251117', 'p_20251118', 'p_20251119', 'p_20251120', 'p_20251121', 'p_20251122',
      'p_20251124', 'p_20251125', 'p_20251126', 'p_20251127', 'p_20251128',
      'p_20251201', 'p_20251202', 'p_20251203', 'p_20251204', 'p_20251205',
      'p_20251208', // Add more problem IDs as needed
    ];

    int uploadedCount = 0;
    int failedCount = 0;

    for (final problemId in problemIds) {
      try {
        final problem = await jsonLoader.loadProblem(problemId);
        if (problem != null) {
          await _db.collection('problems').doc(problemId).set(problem.toMap());
          print('âœ“ Uploaded $problemId (economicInsightData: ${problem.economicInsightData != null ? "YES" : "NO"})');
          uploadedCount++;
        } else {
          print('âœ— Problem $problemId not found in JSON');
          failedCount++;
        }
      } catch (e) {
        print('âœ— Error uploading $problemId: $e');
        failedCount++;
      }
    }

    print('FirestoreService: Upload complete! Uploaded: $uploadedCount, Failed: $failedCount');
  }

  // Seed dummy users for testing the ranking system
  Future<void> seedDummyUsers() async {
    print('FirestoreService: Seeding dummy users...');
    
    final dummyUsers = [
      User(
        id: 'dummy_user_1',
        nickname: 'ê¹€ìˆ˜í•™',
        schoolName: 'ëŒ€ì¹˜ì¤‘í•™êµ',
      ),
      User(
        id: 'dummy_user_2',
        nickname: 'ì´ì˜ì¬',
        schoolName: 'ëŒ€ì›ì¤‘í•™êµ',
      ),
      User(
        id: 'dummy_user_3',
        nickname: 'ë°•ì²œì¬',
        schoolName: 'ì¤‘ëŒ€ë¶€ì¤‘',
      ),
      User(
        id: 'dummy_user_4',
        nickname: 'ìµœê³ ë“ì ',
        schoolName: 'ëŒ€ì¹˜ì¤‘í•™êµ',
      ),
      User(
        id: 'dummy_user_5',
        nickname: 'ì •ìˆ˜ëŠ¥ë§Œì ',
        schoolName: 'ìˆ™ëª…ì—¬ì¤‘',
      ),
    ];

    // Create users
    for (var user in dummyUsers) {
      await _db.collection('users').doc(user.id).set(user.toMap());
    }

    // Add some solved problems for each user
    final now = DateTime.now();
    
    // User 1: 15 solved problems
    for (int i = 0; i < 15; i++) {
      await _db.collection('users').doc('dummy_user_1').collection('history').add({
        'problemId': 'p_dummy_$i',
        'isCorrect': true,
        'solvedAt': now.subtract(Duration(days: i)).toIso8601String(),
        'timeTakenSeconds': 120 + i * 10,
      });
    }

    // User 2: 12 solved problems
    for (int i = 0; i < 12; i++) {
      await _db.collection('users').doc('dummy_user_2').collection('history').add({
        'problemId': 'p_dummy_$i',
        'isCorrect': true,
        'solvedAt': now.subtract(Duration(days: i)).toIso8601String(),
        'timeTakenSeconds': 150 + i * 10,
      });
    }

    // User 3: 18 solved problems (top scorer)
    for (int i = 0; i < 18; i++) {
      await _db.collection('users').doc('dummy_user_3').collection('history').add({
        'problemId': 'p_dummy_$i',
        'isCorrect': true,
        'solvedAt': now.subtract(Duration(days: i)).toIso8601String(),
        'timeTakenSeconds': 100 + i * 10,
      });
    }

    // User 4: 10 solved problems
    for (int i = 0; i < 10; i++) {
      await _db.collection('users').doc('dummy_user_4').collection('history').add({
        'problemId': 'p_dummy_$i',
        'isCorrect': true,
        'solvedAt': now.subtract(Duration(days: i)).toIso8601String(),
        'timeTakenSeconds': 180 + i * 10,
      });
    }

    // User 5: 14 solved problems
    for (int i = 0; i < 14; i++) {
      await _db.collection('users').doc('dummy_user_5').collection('history').add({
        'problemId': 'p_dummy_$i',
        'isCorrect': true,
        'solvedAt': now.subtract(Duration(days: i)).toIso8601String(),
        'timeTakenSeconds': 130 + i * 10,
      });
    }

    print('FirestoreService: Dummy users seeded successfully!');
  }
}
